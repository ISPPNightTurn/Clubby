{% extends "clubby/base_generic.html" %}

{% block content %}
  {% load qr_code %}
  <h1 style="text-align: center;">My History Of Purchases</h1>
  <div style="margin:auto; width: 100%;">
  <div class="card deep-purple darken-4">
    
    {% if list %}
    <table>
      <tr>
        <th>Tipo</th>
        <th>Detalles</th>
        <th>Precio</th>
        <th>Lugar</th>
        <th>Fecha de compra</th>
        <th>Duraci√≥n/Caducidad</th>
        <th>Caducado</th>
        <th>Usado</th>
      </tr>
    {% for qr_item in list %}
      <tr>
      {% if qr_item.product != blank %}
      <td>
        <b>Product</b>
      </td>
      <td>
        <p>{{qr_item.product.name}}</p>
      </td>
      <td>
        <p>{{qr_item.product.price}}</p>
      </td> 
      <td>
        <p>{{qr_item.product.club.name}} - {{qr_item.product.club.address}}</p>
      </td>
      <td>
        <p>{{qr_item.fecha}}</p>
      </td>
      <td>
        <p>6 horas</p>
      </td>
      <td>
        <p>{{qr_item.timed_out}}</p>
      </td>
      <td>
        <p>{{qr_item.is_used}}</p>
      </td>
      {% elif qr_item.ticket != blank %}
      <td>
        <b>Ticket</b>
      </td>
      <td>
        <p>{{qr_item.ticket.event.name}} 
          ({{qr_item.ticket.event.start_date}} / {{qr_item.ticket.event.start_time}}:00)</p>
      </td>
      <td>
        <p>{{qr_item.ticket.price}}</p>
      </td> 
      <td>
        <p>{{qr_item.ticket.event.club.name}} - {{qr_item.ticket.event.club.address}}</p>
      </td>
      <td>
        <p>{{qr_item.fecha}}</p>
      </td>
      <td>
        <p>{{qr_item.ticket.event.duration}} horas</p>
      </td>
      <td>
        <p>{{qr_item.timed_out}}</p>
      </td>
      <td>
        <p>{{qr_item.is_used}}</p>
      </td>
      {% endif %}
    {% endfor %}
  </table>
  {% else %}
  <p class="card-content">You have no purchases used</p>
  {% endif %}
  </div>
</div>
  
{% endblock %}