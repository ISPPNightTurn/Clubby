{% extends "clubby/base_generic.html" %}

{% block content %}
  {% load qr_code %}
  <h1 style="text-align: center;">My History Of Purchases</h1>
  <div style="margin:auto; width: 100%;">
  <div class="card deep-purple darken-4">
    
    {% if list %}
    <table summary=" List of QR items">
      <tr>
        <th id = "Type">Type</th>
        <th id = "Details">Details</th>
        <th id = "Price">Price</th>
        <th id = "Place">Place</th>
        <th id = "Date">Date</th>
        <th id = "Expiring">Expiring date</th>
        <th id = "Expired">Expired</th>
        <th id = "Used">Used</th>
      </tr>
    {% for qr_item in list %}
      <tr>
      {% if qr_item.product != blank %}
      <td>
        <strong>Product</strong>
      </td>
      <td>
        <p>{{qr_item.product.name}}</p>
      </td>
      <td>
        <p>{{qr_item.product.price}}</p>
      </td> 
      <td>
        <p>{{qr_item.product.club.name}} - {{qr_item.product.club.address}}</p>
      </td>
      <td>
        <p>{{qr_item.fecha}}</p>
      </td>
      <td>
        <p>6 horas</p>
      </td>
      <td>
        <p>{{qr_item.timed_out}}</p>
      </td>
      <td>
        <p>{{qr_item.is_used}}</p>
      </td>
      {% elif qr_item.ticket != blank %}
      <td>
        <strong>Ticket</strong>
      </td>
      <td>
        <p>{{qr_item.ticket.event.name}} 
          ({{qr_item.ticket.event.start_date}} / {{qr_item.ticket.event.start_time}}:00)</p>
      </td>
      <td>
        <p>{{qr_item.ticket.price}}</p>
      </td> 
      <td>
        <p>{{qr_item.ticket.event.club.name}} - {{qr_item.ticket.event.club.address}}</p>
      </td>
      <td>
        <p>{{qr_item.fecha}}</p>
      </td>
      <td>
        <p>{{qr_item.ticket.event.duration}} horas</p>
      </td>
      <td>
        <p>{{qr_item.timed_out}}</p>
      </td>
      <td>
        <p>{{qr_item.is_used}}</p>
      </td>
      {% endif %}
    {% endfor %}
  </table>
  {% else %}
  <p class="card-content">You have no purchases used</p>
  {% endif %}
  </div>
</div>
  
{% endblock %}